{"version":3,"sources":["../src/engine/metrics.ts","../src/engine/policy.ts","../src/engine/cost.ts","../src/engine/execution.ts","../src/engine/scheduler.ts","../src/engine/tick.ts","../src/engine/random.ts","../src/worker/simulator.worker.ts"],"sourcesContent":["import { SystemState } from \"../core/state\";\r\n\r\nexport function computeMetrics(state: SystemState): SystemState {\r\n  const usedCPU = state.workers.reduce((a, w) => a + w.usedCPU, 0);\r\n  const usedRAM = state.workers.reduce((a, w) => a + w.usedRAM, 0);\r\n\r\n  const cpuPressure = usedCPU / state.resources.totalCPU;\r\n  const ramPressure = usedRAM / state.resources.totalRAM;\r\n\r\n  return {\r\n    ...state,\r\n    metrics: {\r\n      queueLength: state.tasks.filter((t) => t.status === \"queued\").length,\r\n      cpuPressure,\r\n      ramPressure,\r\n      pressure: Math.max(cpuPressure, ramPressure),\r\n      completed: state.tasks.filter((t) => t.status === \"completed\").length,\r\n      failed: state.tasks.filter((t) => t.status === \"failed\").length,\r\n    },\r\n  };\r\n}\r\n","export type PolicyName = \"FAIRNESS\" | \"BALANCED\" | \"THROUGHPUT\";\r\n\r\nexport type Policy = {\r\n  starvationWeight: number;\r\n  latenessWeight: number;\r\n  failureWeight: number;\r\n  instabilityWeight: number;\r\n};\r\n\r\nexport const POLICIES: Record<PolicyName, Policy> = {\r\n  FAIRNESS: {\r\n    starvationWeight: 2,\r\n    latenessWeight: 0.8,\r\n    failureWeight: 1,\r\n    instabilityWeight: 0.5,\r\n  },\r\n  BALANCED: {\r\n    starvationWeight: 0.5,\r\n    latenessWeight: 1,\r\n    failureWeight: 2,\r\n    instabilityWeight: 1,\r\n  },\r\n  THROUGHPUT: {\r\n    starvationWeight: 0.1,\r\n    latenessWeight: 1.5,\r\n    failureWeight: 3,\r\n    instabilityWeight: 2,\r\n  },\r\n};\r\n","import { Task } from \"../core/task\";\r\nimport { SystemState } from \"../core/state\";\r\nimport { POLICIES } from \"./policy\";\r\n\r\nexport type CostBreakdown = {\r\n  starvation: number;\r\n  lateness: number;\r\n  failureRisk: number;\r\n  instability: number;\r\n  total: number;\r\n};\r\n\r\nexport function computeTaskCost(task: Task, state: SystemState): CostBreakdown {\r\n  const policy = POLICIES[state.policy];\r\n  const now = state.time;\r\n  const pressure = state.metrics.pressure;\r\n\r\n  // --- Starvation ---\r\n  const waitingTime = task.startedAt === undefined ? now - task.createdAt : 0;\r\n\r\n  const starvation = waitingTime * policy.starvationWeight;\r\n\r\n  // --- Lateness ---\r\n  const latenessTime = Math.max(0, now - task.deadline);\r\n\r\n  const lateness = latenessTime * policy.latenessWeight;\r\n\r\n  // --- Failure Risk (expected loss) ---\r\n  const failureRisk = task.failureProbability * pressure * policy.failureWeight;\r\n\r\n  // --- System Instability ---\r\n  const instability = pressure * pressure * policy.instabilityWeight;\r\n\r\n  const total = starvation + lateness + failureRisk + instability;\r\n\r\n  return {\r\n    starvation,\r\n    lateness,\r\n    failureRisk,\r\n    instability,\r\n    total,\r\n  };\r\n}\r\n","import { ResourceCurve } from \"../core/task\";\r\nimport { RNG } from \"./random\";\r\n\r\nexport function sampleUsage(curve: ResourceCurve, rng: RNG): number {\r\n  return rng() < curve.variance ? curve.peak : curve.base;\r\n}\r\n\r\nexport function slowdownFactor(pressure: number): number {\r\n  return 1 + pressure * pressure;\r\n}\r\n","import { SystemState } from \"../core/state\";\r\nimport { computeTaskCost } from \"./cost\";\r\nimport { sampleUsage, slowdownFactor } from \"./execution\";\r\nimport { RNG } from \"./random\";\r\n\r\nconst MAX_PRESSURE = 1.2;\r\n\r\nexport function schedule(\r\n  state: SystemState,\r\n  dt: number,\r\n  rng: RNG\r\n): SystemState {\r\n  const now = state.time;\r\n\r\n  const queued = state.tasks.filter((t) => t.status === \"queued\");\r\n\r\n  // ---- Load shedding ----\r\n  if (state.metrics.pressure > MAX_PRESSURE && queued.length > 0) {\r\n    const worst = queued\r\n      .map((t) => ({ t, cost: computeTaskCost(t, state).total }))\r\n      .sort((a, b) => b.cost - a.cost)[0].t;\r\n\r\n    worst.status = \"failed\";\r\n  }\r\n\r\n  // ---- Admission control ----\r\n  const sortedQueued = queued\r\n    .map((t) => ({ t, cost: computeTaskCost(t, state).total }))\r\n    .sort((a, b) => a.cost - b.cost);\r\n\r\n  for (const { t } of sortedQueued) {\r\n    const cpu = sampleUsage(t.execution.cpuCurve, rng);\r\n    const ram = sampleUsage(t.execution.ramCurve, rng);\r\n\r\n    if (\r\n      state.metrics.cpuPressure + cpu / state.resources.totalCPU > 1 ||\r\n      state.metrics.ramPressure + ram / state.resources.totalRAM > 1\r\n    ) {\r\n      continue;\r\n    }\r\n\r\n    t.status = \"running\";\r\n    t.startedAt = now;\r\n    t.expectedEndAt = now + t.execution.meanDuration;\r\n  }\r\n\r\n  // ---- Execute running tasks ----\r\n  const running = state.tasks.filter((t) => t.status === \"running\");\r\n  const cpuTasks = running.filter((t) => t.phase === \"cpu\");\r\n  const cpuPerTask =\r\n    cpuTasks.length > 0 ? state.resources.totalCPU / cpuTasks.length : 0;\r\n\r\n  for (const t of running) {\r\n    const slow = slowdownFactor(state.metrics.pressure);\r\n\r\n    if (t.phase === \"cpu\") {\r\n      t.progress +=\r\n        ((cpuPerTask / state.resources.totalCPU) *\r\n          (dt / t.execution.meanDuration)) /\r\n        slow;\r\n    } else {\r\n      t.progress += 0.3 * (dt / t.execution.meanDuration);\r\n    }\r\n\r\n    // Correlated failure\r\n    if (rng() < t.failureProbability * state.metrics.pressure) {\r\n      t.status = \"failed\";\r\n      continue;\r\n    }\r\n\r\n    if (t.progress >= 1) {\r\n      t.status = \"completed\";\r\n    }\r\n\r\n    // Phase switching (async illusion)\r\n    if (rng() < 0.15) {\r\n      t.phase = t.phase === \"cpu\" ? \"io\" : \"cpu\";\r\n    }\r\n  }\r\n\r\n  return state;\r\n}\r\n","import { SystemState } from \"../core/state\";\r\nimport { computeMetrics } from \"./metrics\";\r\nimport { schedule } from \"./scheduler\";\r\nimport { RNG } from \"./random\";\r\n\r\nexport function tick(state: SystemState, dt: number, rng: RNG): SystemState {\r\n  let next = { ...state, time: state.time + dt };\r\n\r\n  next = computeMetrics(next);\r\n  next = schedule(next, dt, rng);\r\n  next = computeMetrics(next);\r\n\r\n  return next;\r\n}\r\n","export type RNG = () => number;\r\n\r\nexport function createRNG(seed: number): RNG {\r\n  let t = seed >>> 0;\r\n\r\n  return function () {\r\n    t += 0x6d2b79f5;\r\n    let r = Math.imul(t ^ (t >>> 15), 1 | t);\r\n    r ^= r + Math.imul(r ^ (r >>> 7), 61 | r);\r\n    return ((r ^ (r >>> 14)) >>> 0) / 4294967296;\r\n  };\r\n}\r\n","/// <reference lib=\"webworker\" />\r\n\r\nimport { tick } from \"../engine/tick\";\r\nimport { SystemState } from \"../core/state\";\r\nimport { Task } from \"../core/task\";\r\nimport { PolicyName } from \"../engine/policy\";\r\nimport { SystemResources } from \"../core/resources\";\r\nimport { createRNG } from \"../engine/random\";\r\nlet currentSeed: number = 1;\r\nlet rng = createRNG(currentSeed);\r\n\r\nlet state: SystemState | null = null;\r\nlet interval: ReturnType<typeof setInterval> | null = null;\r\n\r\nconst TICK_MS = 100;\r\n\r\nlet eventLog: Array<{\r\n  time: number;\r\n  message: any;\r\n}> = [];\r\n\r\nself.onmessage = (event: MessageEvent) => {\r\n  const msg = event.data;\r\n  // Log user actions (but NOT INIT or STATE)\r\n  if (state && ![\"STATE\", \"INIT\"].includes(msg.type)) {\r\n    eventLog.push({\r\n      time: state.time,\r\n      message: msg,\r\n    });\r\n  }\r\n  switch (msg.type) {\r\n    case \"INIT\": {\r\n      state = structuredClone(msg.payload.state);\r\n      initialSnapshot = structuredClone(msg.payload.state);\r\n      currentSeed = msg.payload.seed ?? 1;\r\n      rng = createRNG(currentSeed);\r\n      eventLog = [];\r\n      post();\r\n      break;\r\n    }\r\n\r\n    case \"START\": {\r\n      if (!state || interval !== null) return;\r\n      interval = setInterval(runTick, TICK_MS);\r\n      break;\r\n    }\r\n\r\n    case \"PAUSE\": {\r\n      if (interval !== null) {\r\n        clearInterval(interval);\r\n        interval = null;\r\n      }\r\n      break;\r\n    }\r\n\r\n    case \"STEP\": {\r\n      runTick();\r\n      break;\r\n    }\r\n\r\n    case \"ADD_TASK\": {\r\n      if (!state) return;\r\n      state.tasks.push(msg.payload as Task);\r\n      break;\r\n    }\r\n\r\n    case \"SET_POLICY\": {\r\n      if (!state) return;\r\n      state.policy = msg.payload as PolicyName;\r\n      break;\r\n    }\r\n\r\n    case \"SET_RESOURCES\": {\r\n      if (!state) return;\r\n      state.resources = {\r\n        ...state.resources,\r\n        ...(msg.payload as Partial<SystemResources>),\r\n      };\r\n      break;\r\n    }\r\n    case \"REPLAY\": {\r\n      if (!initialSnapshot) return;\r\n\r\n      reset();\r\n\r\n      // Re-apply events in order\r\n      for (const e of msg.payload.events) {\r\n        applyEvent(e.message);\r\n      }\r\n\r\n      post();\r\n      break;\r\n    }\r\n    case \"EXPORT_REPLAY\": {\r\n      postMessage({\r\n        type: \"REPLAY_DATA\",\r\n        payload: {\r\n          seed: currentSeed,\r\n          events: eventLog,\r\n        },\r\n      });\r\n      break;\r\n    }\r\n  }\r\n};\r\n\r\nfunction runTick() {\r\n  if (!state) return;\r\n\r\n  state = tick(state, TICK_MS / 1000, rng);\r\n\r\n  if (state.metrics.pressure > 2) {\r\n    postMessage({\r\n      type: \"COLLAPSE\",\r\n      payload: \"System pressure exceeded recoverable limits.\",\r\n    });\r\n    clearInterval(interval!);\r\n    interval = null;\r\n  }\r\n\r\n  post();\r\n}\r\n\r\nfunction post() {\r\n  postMessage({\r\n    type: \"STATE\",\r\n    payload: state,\r\n  });\r\n}\r\n\r\nlet initialSnapshot: SystemState | null = null;\r\n\r\nfunction reset() {\r\n  if (!initialSnapshot) return;\r\n\r\n  state = structuredClone(initialSnapshot);\r\n  rng = createRNG(currentSeed);\r\n}\r\n\r\nfunction applyEvent(msg: any) {\r\n  switch (msg.type) {\r\n    case \"ADD_TASK\":\r\n      state?.tasks.push(msg.payload);\r\n      break;\r\n\r\n    case \"SET_POLICY\":\r\n      if (state) state.policy = msg.payload;\r\n      break;\r\n\r\n    case \"SET_RESOURCES\":\r\n      if (state) {\r\n        state.resources = {\r\n          ...state.resources,\r\n          ...msg.payload,\r\n        };\r\n      }\r\n      break;\r\n\r\n    case \"START\":\r\n      if (!interval) {\r\n        interval = setInterval(runTick, TICK_MS);\r\n      }\r\n      break;\r\n\r\n    case \"PAUSE\":\r\n      if (interval) {\r\n        clearInterval(interval);\r\n        interval = null;\r\n      }\r\n      break;\r\n  }\r\n}\r\n"],"mappings":"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","names":["state","state","rng","state","rng","state","rng"]}